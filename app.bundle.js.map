{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Slider.js","webpack:///./src/utils/index.js","webpack:///./src/components/ChinaChronological.js","webpack:///./src/app.js","webpack:///./src/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Container","styled","div","Bar","Thumb","attrs","props","style","left","StartDate","EndDate","Slider","state","xPosition","bar","onMouseDownHandler","_onMouseDownHandler","onMouseMoveHandler","_onMouseMoveHandler","onMouseUpHandler","_onMouseUpHandler","startXPosition","barWidth","thumb","currentStep","this","updateData","totalSteps","Math","ceil","e","difference","touches","clientX","ratio","setState","_passCurrentStep","clientWidth","getBoundingClientRect","document","addEventListener","removeEventListener","startLabel","endLabel","type","ref","node","onTouchStart","onMouseDown","Component","defaultProps","propTypes","PropTypes","number","isRequired","func","string","formatNumber","num","toString","replace","mapLegends","HongContainer","MacauContainer","Geo","svg","width","GeoHongKong","GeoMacau","LocationLabel","ToolTip","Header","NumericMapLegend","Legend","ColorIcon","backgrounColor","stageColorMap","1","2","3","4","5","6","ChinaChronological","sortedTimetamps","keys","startDateString","dateString","endDateString","startDate","endDate","step","geo","geoHongKong","geoMacau","tooltip","colorProcessor","_colorProcessor","getConfirmedCount","_getConfirmedCount","_updateData","drawChina","_drawChina","container","hongKongContainer","macauContainer","d3","on","_cleanCanvas","_drawHongKong","_drawMacau","selectAll","remove","count","currentTimestamp","provinceName","properties","NAME","provinceCountData","stage","clientHeight","height","projection","scale","center","centerChinaLongtitude","centerChinaLatitude","translate","path","specialAdministrativeRegions","topojson","macau","objects","layer1","features","tooltipTrack","enter","append","attr","html","NAME_LOCAL","str","positionX","pageX","positionY","pageY","tooltipRect","innerWidth","split","hongKong","provinces","china","truncateSimplifiedMandarine","name_local","Legends","map","label","index","month","day","_renderLegend","App","testData","ReactDOM","render","getElementById"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([180,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport PropTypes from 'prop-types';\n\nconst Container = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst Bar = styled.div`\n  height: 13px;\n  background: #eee;\n  border-radius: 5px;\n  position: relative;\n  flex-grow: 1;\n  margin: 0 15px;\n`;\n\nconst Thumb = styled.div.attrs(props => ({\n  style: {\n    left: `${props.left || 0}%`,\n  },\n}))`\n  position: absolute;\n  top: 50%;\n  border-radius: 5px;\n  height: 20px;\n  width: 11px;\n  background-color: #3f9eff;\n  transform: translate(-50%, -50%);\n  @media (max-width: 767px) {\n    height: 25px;\n    width: 14px;\n  }\n`;\n\nconst StartDate = styled.div`\n\n`\nconst EndDate = styled.div`\n\n`\n\n\n\nclass Slider extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      xPosition: 0,\n    };\n    this.bar = null;\n    this.onMouseDownHandler = this._onMouseDownHandler.bind(this);\n    this.onMouseMoveHandler = this._onMouseMoveHandler.bind(this);\n    this.onMouseUpHandler = this._onMouseUpHandler.bind(this);\n    this.startXPosition = null;\n    this.barWidth = null\n    this.thumb = null;\n    this.currentStep = 0;\n  }\n\n  componentWillUnmount() {\n    // document.removeEventListener('mouseup', this.onMouseUpHandler)\n  }\n\n  componentDidMount() {\n\n  }\n\n  _passCurrentStep() {\n    const { updateData, totalSteps } = this.props;\n    const { xPosition } = this.state;\n    const currentStep = Math.ceil(xPosition / (100 / totalSteps));\n    if (currentStep !== this.currentStep && currentStep < totalSteps) {\n      this.currentStep = currentStep;\n      updateData(currentStep);\n    }\n  }\n\n  _onMouseMoveHandler(e) {\n    const pointer = e.touches ? e.touches[0] : e;\n    const difference = pointer.clientX - this.startXPosition;\n    const ratio = (difference / this.barWidth) * 100;\n    if (difference <= 0) {\n      this.setState({\n        xPosition: 0,\n      }, () => {\n        this._passCurrentStep();\n      });\n      return;\n    }\n    if (ratio >= 0 && ratio <= 100) {\n      this.setState({\n        xPosition: ratio,\n      }, () => {\n        this._passCurrentStep();\n      });\n    }\n  }\n\n  _onMouseDragHandler() {\n\n  }\n\n  _onMouseDownHandler(e) {\n    this.barWidth = this.bar.clientWidth;\n    this.startXPosition = this.bar.getBoundingClientRect().left;\n    document.addEventListener('mousemove', this.onMouseMoveHandler);\n    document.addEventListener('touchmove', this.onMouseMoveHandler);\n    document.addEventListener('mouseup', this.onMouseUpHandler);\n    document.addEventListener('touchend', this.onMouseUpHandler);\n  }\n\n  _onMouseUpHandler(e) {\n    document.removeEventListener('mousemove', this.onMouseMoveHandler);\n    document.removeEventListener('touchmove', this.onMouseMoveHandler);\n    document.removeEventListener('mouseup', this.onMouseUpHandler);\n    document.removeEventListener('touchend', this.onMouseUpHandler);\n  }\n\n  render() {\n    const { totalSteps, startLabel, endLabel } = this.props;\n    const { xPosition } = this.state;\n    return (\n      <Container>\n        <StartDate>\n          {startLabel}\n        </StartDate>\n        <Bar\n          type=\"range\"\n          ref={node => { this.bar = node; }}\n        >\n          <Thumb\n            onTouchStart={this.onMouseDownHandler}\n            onMouseDown={this.onMouseDownHandler}\n            left={xPosition}\n            ref={node => { this.thumb = node; }}\n          />\n        </Bar>\n        <EndDate>\n          {endLabel}\n        </EndDate>\n      </Container>\n    );\n  }\n}\n\nSlider.defaultProps = {\n};\n\nSlider.propTypes = {\n  totalSteps: PropTypes.number.isRequired,\n  updateData: PropTypes.func.isRequired,\n  startLabel: PropTypes.string.isRequired,\n  endLabel: PropTypes.string.isRequired,\n};\n\nexport default Slider;\n","function formatNumber(num) {\n  return num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,');\n}\n\nexport {\n  formatNumber,\n};\n","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport * as d3 from 'd3';\nimport * as topojson from 'topojson';\nimport china from '../data/zh-mainland-provinces.json';\nimport hongKong from '../data/hong-kong.json';\nimport macau from '../data/macau.json';\nimport Slider from './Slider';\nimport { formatNumber } from '../utils';\n\n\nconst mapLegends = ['0', '1 - 10', '11 - 20', '21 - 100', '100 +', '1000 +', '10,000 +'];\n\nconst width = 700;\nconst mapRatio = 0.58;\nconst height = width * mapRatio;\nconst scaleRatio = 0.71;\nconst DEFAULT_MAP_COLOR = '#DADADA';\nconst BORDER_COLOR = '#333';\nconst centerChinaLongtitude = 104.4898;\nconst centerChinaLatitude = 37.5854;\n\nconst widthHongKong = 130;\nconst mapRatioHongKong = 0.73;\nconst heightSAR = widthHongKong * mapRatioHongKong;\nconst scaleRatioHongKong = 70;\n\n\nconst scaleRatioMacau = 200;\n\n\nconst mobileBreakPoint = '600px';\n\nconst Container = styled.div`\n  max-width: ${width}px;\n  margin: 0 auto;\n  box-sizing: content-box;\n  position: relative;\n`;\n\nconst HongContainer = styled.div`\n  width: 16%;\n  box-sizing: content-box;\n  position: absolute;\n  right: 6%;\n  bottom: 31%;\n  border: 1px solid black;\n  border-radius: 5px;\n  text-align: center;\n  @media (max-width: ${mobileBreakPoint}) {\n    bottom: 28%;\n    right: 8%;\n  }\n`;\n\nconst MacauContainer = styled.div`\n  width: 16%;\n  box-sizing: content-box;\n  position: absolute;\n  right: 6%;\n  bottom: 10%;\n  border: 1px solid black;\n  border-radius: 5px;\n  text-align: center;\n  @media (max-width: ${mobileBreakPoint}) {\n    bottom: 12%;\n    right: 8%;\n  }\n`;\n\nconst Geo = styled.svg`\n  margin: 20px auto;\n  width: 100%;\n  height: ${height}px;\n  @media (max-width: ${mobileBreakPoint}) {\n    margin-bottom: 40px;\n  }\n`;\n\nconst GeoHongKong = styled.svg`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  right: 0;\n  top: 0;\n  left: 0;\n`;\n\nconst GeoMacau = styled.svg`\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  right: 0;\n  top: 0;\n  left: 0;\n`;\n\nconst LocationLabel = styled.div`\n  position: absolute;\n  bottom: 10%;\n  right: 0;\n  left: 0;\n  width: 100%;\n  text-align:center;\n  font-size: 18px;\n  @media (max-width: 600px) {\n    font-size: 13px;\n  }\n`;\n\nconst ToolTip = styled.div`\n  color: #222;\n  background: #fff;\n  border-radius: 3px;\n  box-shadow: 0px 0px 2px 0px #a6a6a6;\n  padding: .5em;\n  text-shadow: #f5f5f5 0 1px 0;\n  opacity: 0.9;\n  position: fixed;\n  display: none;\n`;\n\nconst Header = styled.div`\n  color: #333;\n  font-weight: 600;\n  font-size: 26px;\n`;\n\nconst NumericMapLegend = styled.div`\n  display: grid;\n  max-width: 70%;\n  grid-template-columns: auto auto auto auto;\n  margin: 20px 0 0 0;\n`;\n\nconst Legend = styled.div`\n  white-space: nowrap;\n  padding: 5px 0 5px 0;\n  display: flex;\n  align-items: center;\n`;\n\nconst ColorIcon = styled.div`\n  width: 15px;\n  height: 15px;\n  border: 1px solid white;\n  background-color: ${props => props.backgrounColor || 'white'};\n  border-radius: 3px;\n  margin-right: 7px;\n`;\n\nconst stageColorMap = {\n  0: DEFAULT_MAP_COLOR,\n  1: '#F5C6E9',\n  2: '#D493BC',\n  3: '#BC659A',\n  4: '#803D79',\n  5: '#451458',\n  6: '#270048',\n};\n\nconst getInfectedStageFromCount = (count) => {\n  if (count === 0) {\n    return 0;\n  }\n  if (count >= 1 && count <= 10) {\n    return 1;\n  }\n  if (count >= 11 && count <= 20) {\n    return 2;\n  }\n  if (count >= 21 && count <= 100) {\n    return 3;\n  }\n  if (count >= 101 && count <= 1000) {\n    return 4;\n  }\n  if (count >= 1001 && count <= 10000) {\n    return 5;\n  }\n  if (count >= 10001 && count <= 100000) {\n    return 6;\n  }\n  return 0;\n};\n\n\nclass ChinaChronological extends Component {\n  constructor(props) {\n    super(props);\n    const { data } = this.props;\n    const sortedTimetamps = Object.keys(data);\n    const { dateString: startDateString } = data[sortedTimetamps[0]];\n    const { dateString: endDateString } = data[sortedTimetamps[sortedTimetamps.length - 1]];\n    this.startDate = startDateString;\n    this.endDate = endDateString;\n    this.state = {\n      dateString: startDateString,\n      step: 0,\n    };\n    this.geo = null;\n    this.geoHongKong = null;\n    this.geoMacau = null;\n    this.tooltip = null;\n    this.colorProcessor = this._colorProcessor.bind(this);\n    this.getConfirmedCount = this._getConfirmedCount.bind(this);\n    this.updateData = this._updateData.bind(this);\n    this.drawChina = this._drawChina.bind(this);\n    this.container = null;\n    this.hongKongContainer = null;\n    this.macauContainer = null;\n  }\n\n  componentDidMount() {\n    if (this.geo) {\n      // TODO: need to remove such listener\n      d3.select(window).on('resize', () => {\n        this._cleanCanvas();\n        this._drawChina();\n        this._drawHongKong();\n        this._drawMacau();\n      });\n      this._drawHongKong();\n      this._drawChina();\n      this._drawMacau();\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.geo) {\n      this._drawChina();\n      this._drawHongKong();\n      this._drawMacau();\n    }\n  }\n\n  _cleanCanvas() {\n    d3\n      .select(this.geo)\n      .selectAll('path')\n      .remove();\n    d3\n      .select(this.geoHongKong)\n      .selectAll('path')\n      .remove();\n    d3\n      .select(this.geoMacau)\n      .selectAll('path')\n      .remove();\n  }\n\n  _updateData(step) {\n    const { data } = this.props;\n    const sortedTimetamps = Object.keys(data);\n    const currentTimestamp = sortedTimetamps[step];\n    const { dateString } = data[currentTimestamp];\n    this.setState({\n      step,\n      dateString,\n    }, () => {\n      this._cleanCanvas();\n      this._drawChina();\n      this._drawHongKong();\n      this._drawMacau();\n    });\n  }\n\n  _colorProcessor(d) {\n    const { step } = this.state;\n    const { data } = this.props;\n    const sortedTimetamps = Object.keys(data);\n    const currentTimestamp = sortedTimetamps[step];\n    const provinceName = d.properties.name || d.properties.NAME;\n    const { data: provinceCountData, dateString } = data[currentTimestamp];\n    const stage = getInfectedStageFromCount(provinceCountData[provinceName]);\n    return stageColorMap[stage];\n  }\n\n  _getConfirmedCount(d) {\n    const { step } = this.state;\n    const { data } = this.props;\n    const sortedTimetamps = Object.keys(data);\n    const currentTimestamp = sortedTimetamps[step];\n    const provinceName = d.properties.name || d.properties.NAME;\n    const { data: provinceCountData, dateString } = data[currentTimestamp];\n    return provinceCountData[provinceName];\n  }\n\n  _drawMacau() {\n    const { step } = this.state;\n    const clientWidth = this.macauContainer.clientWidth;\n    const clientHeight = clientWidth * mapRatioHongKong;\n    this.macauContainer.style.height = clientHeight + (clientHeight * 0.3);\n    const projection = d3\n      .geoMercator()\n      .scale(clientWidth * scaleRatioMacau)\n      .center([centerChinaLongtitude + 9.06, centerChinaLatitude - 15.43])\n      .translate([clientWidth / 2, clientHeight / 2]);\n\n    const path = d3.geoPath(projection);\n    // const countries = topojson.feature(global, global.objects.countries).features;\n    const specialAdministrativeRegions = topojson.feature(macau, macau.objects.layer1).features;\n    const tooltip = d3.select(this.tooltip);\n    // const tooltipDimension = this.tooltip.getBoundingClientRect();\n    const tooltipTrack = this.tooltip;\n    const truncateSimplifiedMandarine = str => (str && typeof str === 'string') ? str.split('|')[0] : '';\n    const colorProcessor = this.colorProcessor;\n    const getConfirmedCount = this.getConfirmedCount;\n    d3\n      .select(this.geoMacau)\n      .selectAll('path')\n      .data(specialAdministrativeRegions)\n      .enter()\n      .append('path')\n      .attr('d', path)\n      .attr('fill', function(d) {\n        const color = colorProcessor(d);\n        return color;\n        // return DEFAULT_MAP_COLOR;\n      })\n      .attr('stroke', BORDER_COLOR)\n      .attr('stroke-width', 0.5)\n      .on('mouseover', function (d) {\n        d3\n          .select(this)\n          .attr('stroke-width', 1);\n        tooltip.style('display', 'block').html(`\n          <div>\n            ${d.properties.NAME_LOCAL}\n          </div>\n          <div>\n            確診人數：${formatNumber(getConfirmedCount(d))}\n          </div>\n        `);\n      })\n      .on('mousemove', (d) => {\n        let positionX = d3.event.pageX + 10;\n        const positionY = d3.event.pageY;\n        const tooltipRect = tooltipTrack.getBoundingClientRect();\n        if ((positionX + tooltipRect.width) > window.innerWidth) {\n          positionX = d3.event.pageX - tooltipRect.width - 10;\n        }\n        tooltip\n          .style('top', `${positionY}px`)\n          .style('left', `${positionX}px`)\n          .html(`\n            <div>\n              ${truncateSimplifiedMandarine(d.properties.NAME_LOCAL)}\n            </div>\n            <div>\n              確診人數：${formatNumber(getConfirmedCount(d))}\n            </div>\n          `);\n      })\n      .on('mouseout', function () {\n        d3\n          .select(this)\n          .attr('stroke-width', 0.5);\n        tooltip.style('display', 'none');\n      });\n  }\n\n  _drawHongKong() {\n    const { step } = this.state;\n    const clientWidth = this.hongKongContainer.clientWidth;\n    const clientHeight = clientWidth * mapRatioHongKong;\n    this.hongKongContainer.style.height = clientHeight + (clientHeight * 0.3);\n    const projection = d3\n      .geoMercator()\n      .scale(clientWidth * scaleRatioHongKong)\n      .center([centerChinaLongtitude + 9.63, centerChinaLatitude - 15.25])\n      .translate([clientWidth / 2, clientHeight / 2]);\n\n    const path = d3.geoPath(projection);\n    // const countries = topojson.feature(global, global.objects.countries).features;\n    const specialAdministrativeRegions = topojson.feature(hongKong, hongKong.objects.layer1).features;\n    const tooltip = d3.select(this.tooltip);\n    // const tooltipDimension = this.tooltip.getBoundingClientRect();\n    const tooltipTrack = this.tooltip;\n    const truncateSimplifiedMandarine = str => (str && typeof str === 'string') ? str.split('|')[0] : '';\n    const colorProcessor = this.colorProcessor;\n    const getConfirmedCount = this.getConfirmedCount;\n    d3\n      .select(this.geoHongKong)\n      .selectAll('path')\n      .data(specialAdministrativeRegions)\n      .enter()\n      .append('path')\n      .attr('d', path)\n      .attr('fill', function(d) {\n        const color = colorProcessor(d);\n        return color;\n        // return DEFAULT_MAP_COLOR;\n      })\n      .attr('stroke', BORDER_COLOR)\n      .attr('stroke-width', 0.5)\n      .on('mouseover', function (d) {\n        d3\n          .select(this)\n          .attr('stroke-width', 1);\n        tooltip.style('display', 'block').html(`\n          <div>\n            ${d.properties.NAME_LOCAL}\n          </div>\n          <div>\n            確診人數：${formatNumber(getConfirmedCount(d))}\n          </div>\n        `);\n      })\n      .on('mousemove', (d) => {\n        let positionX = d3.event.pageX + 10;\n        const positionY = d3.event.pageY;\n        const tooltipRect = tooltipTrack.getBoundingClientRect();\n        if ((positionX + tooltipRect.width) > window.innerWidth) {\n          positionX = d3.event.pageX - tooltipRect.width - 10;\n        }\n        tooltip\n          .style('top', `${positionY}px`)\n          .style('left', `${positionX}px`)\n          .html(`\n            <div>\n              ${truncateSimplifiedMandarine(d.properties.NAME_LOCAL)}\n            </div>\n            <div>\n              確診人數：${formatNumber(getConfirmedCount(d))}\n            </div>\n          `);\n      })\n      .on('mouseout', function () {\n        d3\n          .select(this)\n          .attr('stroke-width', 0.5);\n        tooltip.style('display', 'none');\n      });\n  }\n\n  _drawChina() {\n    const { step } = this.state;\n    const clientWidth = this.container.clientWidth;\n    const clientHeight = clientWidth * mapRatio;\n    this.geo.style.height = clientHeight;\n    const projection = d3\n      .geoMercator()\n      .scale(clientWidth * scaleRatio)\n      .center([centerChinaLongtitude + 4, centerChinaLatitude])\n      .translate([clientWidth / 2, clientHeight / 2]);\n\n    const path = d3.geoPath(projection);\n    // const countries = topojson.feature(global, global.objects.countries).features;\n    const provinces = topojson.feature(china, china.objects.provinces).features;\n    const tooltip = d3.select(this.tooltip);\n    const truncateSimplifiedMandarine = str => (str && typeof str === 'string') ? str.split('|')[0] : '';\n    const colorProcessor = this.colorProcessor;\n    const getConfirmedCount = this.getConfirmedCount;\n    d3\n      .select(this.geo)\n      .selectAll('path')\n      .data(provinces)\n      .enter()\n      .append('path')\n      .attr('d', path)\n      .attr('fill', function(d) {\n        const color = colorProcessor(d);\n        return color;\n      })\n      .attr('stroke', BORDER_COLOR)\n      .attr('stroke-width', 0.5)\n      .on('mouseover', function (d) {\n        d3\n          .select(this)\n          .attr('stroke-width', 1);\n        tooltip.style('display', 'block').html(`\n          <div>\n            ${truncateSimplifiedMandarine(d.properties.name_local)}\n          </div>\n          <div>\n            確診人數：${formatNumber(getConfirmedCount(d))}\n          </div>\n        `);\n      })\n      .on('mousemove', (d) => {\n        tooltip\n          .style('top', `${d3.event.pageY}px`)\n          .style('left', `${d3.event.pageX + 10}px`)\n          .html(`\n            <div>\n              ${truncateSimplifiedMandarine(d.properties.name_local)}\n            </div>\n            <div>\n              確診人數：${formatNumber(getConfirmedCount(d))}\n            </div>\n          `);\n      })\n      .on('mouseout', function () {\n        d3\n          .select(this)\n          .attr('stroke-width', 0.5);\n        tooltip.style('display', 'none');\n      });\n  }\n\n  _renderLegend() {\n    const Legends = mapLegends.map((label, index) => {\n      return (\n        <Legend\n          key={`${index}_${label}`}\n        >\n          <ColorIcon\n            backgrounColor={stageColorMap[index]}\n          />\n          <span>{label}</span>\n        </Legend>\n      );\n    });\n    return (\n      <NumericMapLegend>\n        {Legends}\n      </NumericMapLegend>\n    );\n  }\n\n  render() {\n    const { data } = this.props;\n    const { dateString } = this.state;\n    const sortedTimetamps = Object.keys(data);\n    const [month, day] = dateString.split('/');\n    return (\n      <Container\n        ref={(node) => { this.container = node; }}\n      >\n        <Header>{`${month}月${day}日確診人數`}</Header>\n        {this._renderLegend()}\n        <Geo\n          ref={(node) => { this.geo = node; }}\n        />\n        <HongContainer\n          ref={(node) => { this.hongKongContainer = node; }}\n        >\n          <GeoHongKong\n            ref={(node) => { this.geoHongKong = node; }}\n          />\n          <LocationLabel>香港</LocationLabel>\n        </HongContainer>\n        <MacauContainer\n          ref={(node) => { this.macauContainer = node; }}\n        >\n          <GeoMacau\n            ref={(node) => { this.geoMacau = node; }}\n          />\n          <LocationLabel>澳門</LocationLabel>\n        </MacauContainer>\n        <Slider\n          updateData={this.updateData}\n          totalSteps={sortedTimetamps.length}\n          startLabel={this.startDate}\n          endLabel={this.endDate}\n        />\n        <ToolTip\n          ref={(node) => { this.tooltip = node; }}\n        />\n      </Container>\n    );\n  }\n}\n\nexport default ChinaChronological;\n","import React from 'react';\nimport ChinaChronological from './components/ChinaChronological';\nimport testData from './data/testData.json';\n\n\n\nconst App = () => (\n  <div>\n    <ChinaChronological\n      data={testData}\n    />\n  </div>\n);\n\nexport default App;\n","/* eslint-disable comma-dangle */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\n\n// import fetchSpreadSheet from './utils/fetchSpreadSheetv2';\n//\n// fetchSpreadSheet((data) => {\n//   console.log(data);\n// })\n\nReactDOM.render(\n  <App />, document.getElementById('root')\n);\n"],"sourceRoot":""}